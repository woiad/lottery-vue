webpackJsonp([1],{EO5G:function(t,e){},N4vO:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAs0lEQVQ4T92TrQ0CQRCFvydIMAg0igoo4TBUgaECDAjkNUAHCBQ0gUDgaQFBA1TwLpssZCG3F45zjNpk3nzzu6KjqWM8tQDbfWAF9JIEF0mnz4Q5QAGMJB1CgO0A2kpaZgG258AsCm4NrU2BM7CTdH+rwHZwIikIas12Kal8OrMA2wtJ+9hC+v4a8BKmWdtU8AeAbkP8dY1jYAMcM4ABUEha195B3PkEGDZc4lXSIwto+zsrV5GOEXXO1Y4AAAAASUVORK5CYII="},"P8+E":function(t,e){},XObz:function(t,e){},cH5Z:function(t,e){},fGZz:function(t,e,a){"use strict";var i={name:"k-select",props:{selectData:{type:Array,default:function(){return[]}},selected:{default:0},selectTip:{type:String,default:"请选择等级"}},data:function(){return{selectText:this.selected||this.selectTip,drapShow:!1}},methods:{packUp:function(){this.drapShow=!this.drapShow},chose:function(t){this.selectText=t,this.$emit("changeSelect",this.selectText)}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select-contaner"},[a("div",{staticClass:"select-wrapper",on:{click:t.packUp}},[a("span",[t._v(t._s(t.selectText))]),t._v(" "),a("span",{staticClass:"arrow",class:{"arrow-up":t.drapShow}}),t._v(" "),t.drapShow?a("div",{staticClass:"draw"},[a("ul",t._l(t.selectData,function(e,i){return a("li",{key:i,class:{active:e===t.selectText},on:{click:function(a){t.chose(e)}}},[t._v(t._s(e))])}),0)]):t._e()])])},staticRenderFns:[]};var n=a("VU/8")(i,s,!1,function(t){a("EO5G")},"data-v-2a595210",null);e.a=n.exports},qbFa:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),n=a("tG27"),o=a("fGZz"),p={name:"page",data:function(){return{pageNum:[],jumpPage:1,currentPage:1}},props:{pageNumber:{type:Number,default:10}},mounted:function(){this.page()},watch:{pageNumber:function(t){this.page()}},methods:{page:function(){if(this.pageNum=[],this.currentPage+4<=this.pageNumber){for(var t=1;t<this.currentPage+4;t++)this.pageNum.push(t),t===this.currentPage+4-1&&this.currentPage+4!==this.pageNumber&&this.pageNum.push("...");this.pageNum.push(this.pageNumber)}else{for(var e=1;e<this.currentPage+4;e++)2===e&&this.pageNumber>=7?this.pageNum.push("..."):e<this.pageNumber&&this.pageNum.push(e);this.pageNum.push(this.pageNumber)}var a=this.pageNum.length-9;if(this.pageNum.length>9&&this.currentPage+4<=this.pageNumber)for(var i=0;i<a;i++)this.pageNum.splice(0,1);else for(var s=0;s<a;s++)this.pageNum.splice(2,1);this.$emit("pageNumChange",this.currentPage)},pageChange:function(t){isNaN(t)||(this.currentPage=t,this.page())},prePage:function(){this.currentPage--,this.page()},nextPage:function(){this.currentPage++,this.page()},inpEnter:function(){(""===this.jumpPage||Number(this.jumpPage)>this.pageNumber||Number(this.jumpPage)<1||isNaN(this.jumpPage))&&(this.jumpPage=1),this.currentPage=Number(this.jumpPage),this.page()}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-wrapper"},[a("button",{staticClass:"pre page",attrs:{disabled:1===t.currentPage},on:{click:t.prePage}}),t._v(" "),a("ul",t._l(t.pageNum,function(e,i){return a("li",{key:i,staticClass:"page",class:{active:t.currentPage===e},on:{click:function(a){t.pageChange(e)}}},[t._v(t._s(e))])}),0),t._v(" "),a("button",{staticClass:"next page",attrs:{disabled:t.currentPage===t.pageNumber},on:{click:t.nextPage}}),t._v(" "),a("div",{staticClass:"elevator"},[a("span",[t._v("跳至")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.jumpPage,expression:"jumpPage"}],domProps:{value:t.jumpPage},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.inpEnter(e):null},input:function(e){e.target.composing||(t.jumpPage=e.target.value)}}}),t._v(" "),a("span",[t._v("页")])])])},staticRenderFns:[]};var c=a("VU/8")(p,r,!1,function(t){a("P8+E")},"data-v-4e414336",null).exports,l=a("ZoQJ"),u=a("mtWM"),h=a.n(u),d={name:"up-pictrue",data:function(){return{inputFileId:"upImg",showPicId:"showImg",picUrl:"",visible:!1,imageData:""}},props:{picWidth:{type:String,default:"58px"},picHeight:{String:String,default:"58px"}},mounted:function(){"undefined"==typeof FileReader&&alert("你的浏览器不支持 FileReader, 请更换浏览器！")},methods:{readFile:function(){var t=new FormData;if(this.imageData=l.a.getId(this.inputFileId).files[0],t.append("image",this.imageData),console.log(t.getAll("image")),!l.a.nameReg(t.getAll("image")[0].type))return alert("上传失败：图片格式要求为jpeg！"),this.imageData="",!0;if(t.getAll("image")[0].size>1048576)return alert("上传失败：图片大小超过1m"),this.imageData="",!0;var e=new FileReader;e.readAsDataURL(this.imageData);var a=l.a.getId(this.showPicId),i=a.lastChild.tagName.toLowerCase(),s=new Image,n=this;e.onload=function(t){if("img"===i)return a.lastChild.src=t.target.result,!0;s.src=t.target.result,s.style.width=n.picWidth,s.style.height=n.picHeight,s.style.borderRadius="4px",a.appendChild(s)}},openFile:function(){1===l.a.getId(this.inputFileId).files.length&&(l.a.getId(this.inputFileId).value=""),l.a.getId(this.inputFileId).click()},handleRemove:function(){var t=l.a.getId(this.showPicId);console.dir(t),t.removeChild(t.lastChild),this.imageData=""},submit:function(){var t=this,e=new FormData;this.imageData&&e.append("image",this.imageData),console.dir(e),h.a.create({headers:{"Content-Type":"multipart/form-data"}}).post("/uploadfile",e).then(function(e){200===e.data[1]?(alert("文件上传成功！"),console.log(e.data[2]),t.$emit("picPath",e.data[2])):alert("文件上传出错，请重新上传！")}).catch(function(t){console.log(t)})}}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"up-pictrue-container"},[i("div",{staticClass:"up-area",style:{width:t.picWidth,height:t.picHeight}},[i("form",{style:{width:t.picWidth,height:t.picHeight},attrs:{method:"post",enctype:"multipart/form-data",action:"http://113.105.246.230:5110/uploadfile",id:"form"}},[i("input",{staticClass:"inputFile",attrs:{type:"file",name:"file",id:t.inputFileId},on:{change:t.readFile}}),t._v(" "),i("div",{staticClass:"up-but",on:{click:function(e){return e.preventDefault(),t.openFile(e)}}},[t._m(0)]),t._v(" "),i("button",{staticClass:"submit-but",attrs:{disabled:""===t.imageData},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t._v("上传")])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.imageData,expression:"imageData"}],staticClass:"up-picture",style:{width:t.picWidth,height:t.picHeight,"line-height":t.picHeight},attrs:{id:t.showPicId}},[i("div",{staticClass:"marsk"},[i("div",{staticClass:"del",on:{click:t.handleRemove}},[i("img",{attrs:{src:a("N4vO")}})])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("button",{staticClass:"but",staticStyle:{outline:"none"}})])}]};var g=a("VU/8")(d,m,!1,function(t){a("XObz")},"data-v-15ac23de",null).exports,v=a("hsV5"),f=a("NC6I"),_=a.n(f),b={name:"personSet",data:function(){return{personData:[],showPersonData:[],listImg:[],popTitle:"添加员工",popShow:!1,personId:"",baseMd5:"",popData:{username:"",entrytime:"",department:0,jobnumber:"",leavejob:0,picdir:""},selectData:["销售部","资源部","总经办","市场部","技术部","财务部","行政部"],leaveData:["0","1"],delShow:!1,searchName:"",personName:[],dropShow:!1,pageNum:1,page:1}},mounted:function(){this.init("all")},methods:{init:function(t){var e=this;this.$post("/pyapi/console",{key:"ps_show",content:t}).then(function(a){"all"===t?(e.personData=a,e.pageNum=Math.ceil(a.length/10),e.showPersonData=e.personData.slice(10*(e.page-1),10*e.page)):"listimg"===t?e.listImg=a:e.personData=a}).catch(function(t){alert("数据加载有误，请稍后重试！"),console.log(t)})},setPicPath:function(t){this.popData.picdir=t},addClick:function(){this.popTitle="添加员工",this.popShow=!0},departSelect:function(t){this.popData.department=t},leaveSelect:function(t){this.popData.leavejob=t},personModify:function(t,e){var a=this;this.popShow=!0,this.personId=t,this.popTitle=e,this.personData.forEach(function(t){t.id===a.personId&&(a.popData.username=t.username,a.popData.entrytime=t.entrytime,a.popData.department=t.department,a.popData.jobnumber=t.jobnumber,a.popData.leavejob=t.leavejob,a.popData.picdir=t.picdir,a.baseMd5=_()(s()(a.popData)))})},personDel:function(t){this.personId=t,this.delShow=!0},cancel:function(){this.popShow=!1,this.popData.username="",this.popData.entrytime="",this.popData.department=0,this.popData.jobnumber="",this.popData.leavejob=0,this.popData.picdir=""},submitData:function(){var t=this;if(""===this.popData.username||""===this.popData.entrytime||0===this.popData.department||""===this.popData.jobnumber||0===this.popData.leavejob||""===this.popData.picdir)return alert("请填写完整资料"),!0;if(!/\d{4}-\d{2}-\d{2}/g.test(this.popData.entrytime))return alert("入职时间格式不正确！"),!0;"添加员工"===this.popTitle?this.$post("/pyapi/console",{key:"ps_add",content:s()(this.popData)}).then(function(e){200===e[1]?(alert("添加成功！"),t.cancel(),t.init("all")):403===e[1]&&alert(e[2]),console.log(e)}).catch(function(t){console.log(t)}):_()(s()(this.popData))===this.baseMd5?alert("请修改数据后在提交！"):this.$post("/pyapi/console",{key:"ps_update",content:s()(this.popData),id:this.personId}).then(function(e){200===e[1]?(alert("修改成功！"),t.init("all"),t.cancel()):403===e[1]&&alert(e[2]),console.log(e)}).catch(function(t){alert("提交有误，请稍后重新提交"),console.log(t)})},delBtn:function(){var t=this;this.$post("/pyapi/console",{key:"ps_del",id:this.personId}).then(function(e){200===e[1]?(alert("删除成功！"),t.delShow=!1,t.$post("/pyapi/console",{key:"ps_show",content:"all"}).then(function(e){e.length%10==0&&(t.page=Math.ceil(e.length/10)),t.personData=e,t.pageNum=Math.ceil(e.length/10),t.showPersonData=t.personData.slice(10*(t.page-1),10*t.page)}).catch(function(t){alert("数据加载有误，请稍后重试！"),console.log(t)})):403===e[1]&&alert(e[2])}).catch(function(t){alert("删除出错，请稍后重试！"),console.log(t)})},choseName:function(t){this.searchName=t,this.personName=[],this.init(this.searchName)},inputName:function(){var t=RegExp(this.searchName,"gi");this.personName=this.personData.filter(function(e){if(t.test(e.username))return e})},submitName:function(){this.init(this.searchName),this.personName=[]},pageNumChange:function(t){this.page=t,this.showPersonData=this.personData.slice(10*(this.page-1),10*this.page)}},components:{popWindow:n.a,kSelect:o.a,page:c,upPictrue:g,delWindow:v.a}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"person-set-wrapper"},[a("div",{staticClass:"add"},[a("button",{staticClass:"but primary",on:{click:t.addClick}},[t._v("添加员工")])]),t._v(" "),a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchName,expression:"searchName"}],attrs:{placeholder:"输入员工姓名搜素"},domProps:{value:t.searchName},on:{input:[function(e){e.target.composing||(t.searchName=e.target.value)},t.inputName],keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.submitName(e):null},blur:function(e){t.personName=[]}}}),t._v(" "),a("div",{staticClass:"search-icon"}),t._v(" "),0!==t.personName.length?a("div",{staticClass:"draw"},[a("ul",t._l(t.personName,function(e,i){return a("li",{key:i,on:{click:function(a){t.choseName(e.username)}}},[t._v(t._s(e.username))])}),0)]):t._e()]),t._v(" "),a("div",{staticClass:"table"},[a("table",[t._m(0),t._v(" "),a("tbody",[t._l(t.showPersonData,function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.username))]),t._v(" "),a("td",[t._v(t._s(e.entrytime))]),t._v(" "),a("td",[t._v(t._s(e.department))]),t._v(" "),a("td",[t._v(t._s(e.jobnumber))]),t._v(" "),a("td",[t._v(t._s(e.leavejob))]),t._v(" "),a("td",[t._v(t._s(e.picdir))]),t._v(" "),a("td",[a("button",{staticClass:"but but-set",on:{click:function(a){t.personModify(e.id,"修改员工资料")}}},[t._v("修改")]),t._v(" "),a("button",{staticClass:"but but-del",on:{click:function(a){t.personDel(e.id)}}},[t._v("删除")])])])}),t._v(" "),0===t.personData.length?a("tr",{staticStyle:{height:"40px","font-size":"14px","font-weight":"700"}},[a("th",{attrs:{colspan:"7"}},[t._v("暂无数据")])]):t._e()],2)])]),t._v(" "),a("div",{staticClass:"page",staticStyle:{"margin-top":"20px"}},[t.pageNum>1?a("page",{attrs:{pageNumber:t.pageNum},on:{pageNumChange:t.pageNumChange}}):t._e()],1),t._v(" "),a("div",{staticClass:"pop"},[a("transition",{attrs:{name:"fade"}},[t.popShow?a("pop-window",{attrs:{title:t.popTitle},on:{cancel:t.cancel,ok:t.submitData}},[a("div",{staticClass:"item-wrapper",attrs:{slot:"content"},slot:"content"},["添加员工"===t.popTitle?a("div",{staticClass:"item"},[a("label",[t._v("员工姓名：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.popData.username,expression:"popData.username"}],attrs:{placeholder:"请输入员工姓名"},domProps:{value:t.popData.username},on:{input:function(e){e.target.composing||t.$set(t.popData,"username",e.target.value)}}})]):t._e(),t._v(" "),a("div",{staticClass:"item"},[a("label",[t._v("入职时间：(格式为 YYYY-MM-DD)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.popData.entrytime,expression:"popData.entrytime"}],attrs:{placeholder:"请输入入职时间"},domProps:{value:t.popData.entrytime},on:{input:function(e){e.target.composing||t.$set(t.popData,"entrytime",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"item"},[a("label",[t._v("员工部门：")]),t._v(" "),a("k-select",{attrs:{"select-data":t.selectData,selectTip:"请选择员工部门",selected:t.popData.department},on:{changeSelect:t.departSelect}})],1),t._v(" "),a("div",{staticClass:"item"},[a("label",[t._v("员工编号：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.popData.jobnumber,expression:"popData.jobnumber"}],attrs:{placeholder:"请输入员工编号"},domProps:{value:t.popData.jobnumber},on:{input:function(e){e.target.composing||t.$set(t.popData,"jobnumber",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"item"},[a("label",[t._v("是否离职:（是0 否1）")]),t._v(" "),a("k-select",{attrs:{"select-data":t.leaveData,selectTip:"请选择是否离职",selected:t.popData.leavejob},on:{changeSelect:t.leaveSelect}})],1),t._v(" "),"添加员工"===t.popTitle?a("div",{staticClass:"item"},[a("label",[t._v("上传图片：")]),t._v(" "),a("up-pictrue",{on:{picPath:t.setPicPath}})],1):t._e(),t._v(" "),"添加员工"===t.popTitle?a("div",{staticClass:"item"},[a("label",[t._v("图片路径:（路径格式：/img/20181219.jpeg）")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.popData.picdir,expression:"popData.picdir"}],attrs:{placeholder:"请输入图片路径"},domProps:{value:t.popData.picdir},on:{input:function(e){e.target.composing||t.$set(t.popData,"picdir",e.target.value)}}})]):t._e()])]):t._e()],1)],1),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.delShow?a("del-window",{on:{cancel:function(e){t.delShow=!1},comfirmHandelClick:t.delBtn}}):t._e()],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("员工姓名")]),t._v(" "),a("th",[t._v("入职时间")]),t._v(" "),a("th",[t._v("员工部门")]),t._v(" "),a("th",[t._v("员工工号")]),t._v(" "),a("th",[t._v("是否离职")]),t._v(" "),a("th",[t._v("图片路径")]),t._v(" "),a("th",[t._v("操作")])])}]};var N=a("VU/8")(b,D,!1,function(t){a("cH5Z")},"data-v-dcde3588",null);e.default=N.exports}});
//# sourceMappingURL=1.75b2d25fdc19f5258014.js.map