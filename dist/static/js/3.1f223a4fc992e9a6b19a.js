webpackJsonp([3],{"0yXI":function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpldj0iaHR0cDovL3d3dy53My5vcmcvMjAwMS94bWwtZXZlbnRzIiB2ZXJzaW9uPSIxLjEiIGJhc2VQcm9maWxlPSJmdWxsIiBoZWlnaHQ9IjYwcHgiIHdpZHRoPSI2MHB4Ij4KPHBhdGggc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIG9wYWNpdHk9IjAuNTAyIiBmaWxsPSJyZ2IoIDAsIDAsIDAgKSIgZD0iTTMwLDEgQzQ2LjAxNiwxIDU5LDEzLjk4NCA1OSwzMCBDNTksNDYuMDE2IDQ2LjAxNiw1OSAzMCw1OSBDMTMuOTg0LDU5IDEsNDYuMDE2IDEsMzAgQzEsMTMuOTg0IDEzLjk4NCwxIDMwLDEgWiAiIC8+CjxwYXRoIHN0cm9rZS1saW5lY2FwPSJidXR0IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBmaWxsPSJyZ2IoIDI1NSwgMjU1LCAyNTUgKSIgZD0iTTMwLDYwIEMxMy40MzEsNjAgMCw0Ni41NjkgMCwzMCBDMCwxMy40MzEgMTMuNDMxLDAgMzAsMCBDNDYuNTY5LDAgNjAsMTMuNDMxIDYwLDMwIEM2MCw0Ni41NjkgNDYuNTY5LDYwIDMwLDYwIFpNMzAsMyBDMTUuMDg4LDMgMywxNS4wODggMywzMCBDMyw0NC45MTIgMTUuMDg4LDU3IDMwLDU3IEM0NC45MTIsNTcgNTcsNDQuOTEyIDU3LDMwIEM1NywxNS4wODggNDQuOTEyLDMgMzAsMyBaICIgLz4KPHBhdGggc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIGZpbGw9InJnYiggMjU1LCAyNTUsIDI1NSApIiBkPSJNMzEuMDg4LDEwIEMzMS4zNywxMi4wMDEgMzEuNDEsMTQuNTI0IDMzLjUwNiwxNy4wNDcgQzM1LjExNywxOC45NjkgMzYuOTMxLDIwLjY5IDM4LjE4LDIyLjI1MiBDMzkuODMyLDI0LjI5NCA0MSwyNi44NTcgNDEsMjkuNDYgQzQxLDMzLjYyNCAzOC45ODYsMzcuNzQ3IDM3LjYxNSw0MC4wMyBDMzcuNjE1LDQwLjAzIDM2Ljk3MSw0MC4wMyAzNi45NzEsNDAuMDMgQzM3LjkzOCwzNy44NjggMzkuODcyLDM0LjMwNCAzOS43MSwzMC41MDEgQzM5LjYzLDI4LjM3OCAzOC44MjQsMjYuMDk2IDM3LjQ1NSwyNC40MTUgQzM1LjkyMywyMi40NTIgMzMuMzQ0LDIwLjg5MSAzMS4wODgsMjAuNzMxIEMzMS4wODgsMjAuNzMxIDMxLjA4OCw0My40MzMgMzEuMDg4LDQzLjQzMyBDMzEuMDg4LDQ1LjIzNSAzMCw0Ni44NzcgMjguNDI5LDQ4LjA3OCBDMjYuODk4LDQ5LjI3OSAyNC44ODMsNTAgMjMuMTEsNTAgQzIxLjk4Miw1MCAyMC45MzQsNDkuNjQgMjAuMjA5LDQ5LjAzOSBDMTkuNDQzLDQ4LjQzOCAxOSw0Ny41NTggMTksNDYuNTE3IEMxOSw0NC44NzUgMjAuMTI4LDQzLjIzMyAyMS42NTksNDIuMDMyIEMyMy4xOTEsNDAuNzkxIDI1LjEyNCwzOS45OSAyNi43MzYsMzkuOTkgQzI4LjE0NywzOS45OSAyOS4zNTUsNDAuMTkgMzAuMDgxLDQwLjg3MSBDMzAuMDgxLDQwLjg3MSAzMC4wODEsMTAgMzAuMDgxLDEwIEMzMC4wODEsMTAgMzEuMDg4LDEwIDMxLjA4OCwxMCBaICIgLz4KPC9zdmc+"},"7cnZ":function(t,e){},f0RF:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("ZoQJ");function n(t,e){return parseInt(Math.random()*(e-t)-1)+t}function a(t,e){return t+Math.random()*(e-t)}function o(t){return t+"s"}var r=function(){var t="../static/img/color"+n(1,10)+".png",e=n(0,document.body.clientWidth)+"px",i=Math.random()<.5?"leftRotation":"rightRotation",s=o(a(5,11)),r=o(a(4,8)),c=o(a(0,5)),l=document.createElement("div"),u=document.createElement("img");return u.src=t,l.style.top="-100px",l.style.left=e,l.style.webkitAnimationName="fade,drop",u.style.webkitAnimationName=i,l.style.webkitAnimationDuration=s+","+s,l.style.webkitAnimationDelay=c+","+c,u.style.webkitAnimationDuration=r,l.appendChild(u),l},c={name:"lotteryDevice",data:function(){return{boxShow:!1,cylic:"",luckyNum:[],drawerShow:!1,prizeDesc:"请选择奖项开始抽奖",lotteryTipShow:!1,prizeButSrc:"../static/img/prize_start.png",luckyer:[],prizeLevel:[{title:"特等奖",level:1},{title:"一等奖",level:2},{title:"二等奖",level:3},{title:"三等奖",level:4},{title:"随机一",level:5},{title:"随机二",level:6}],level:1,listImg:[],camera:"",scene:"",renderer:"",controls:"",objects:[],targets:{table:[],sphere:[],helix:[],grid:[]},targetsdh:{table:[],sphere:[],helix:[],grid:[]},imgNum:0,popWindowshow:!1,peopleNull:[]}},mounted:function(){var t=this;this.$post("/pyapi/console",{key:"ps_show",content:"listimg"}).then(function(e){t.listImg=e,t.init(),t.animate()}).catch(function(t){console.log(t)})},methods:{init:function(){for(var t=[],e=0;e<this.listImg.length;e++){var i={};i.image="http://113.105.246.230:5110/"+this.listImg[e].picdir,i.name=this.listImg[e].username,i.pos_x=e%20+1,i.pos_y=Math.floor(e/20)+1,t.push(i)}for(var n=[],a=0;a<t.length;a++)n.push(t[a]);this.camera=new THREE.PerspectiveCamera(40,window.innerWidth/window.innerHeight,1,4e3),this.camera.position.z=3e3,this.scene=new THREE.Scene;for(var o=0;o<n.length;o++){var r=document.createElement("div");r.className="element";var c=document.createElement("img");c.className="avatar",c.src=n[o].image,r.appendChild(c);var l=new THREE.CSS3DObject(r);l.position.x=4e3*Math.random()-2e3,l.position.y=4e3*Math.random()-2e3,l.position.z=4e3*Math.random()-2e3,this.scene.add(l),this.objects.push(l);var u=new THREE.Object3D;u.position.x=140*n[o].pos_x-1330,u.position.y=-180*n[o].pos_y+990,this.targets.table.push(u)}for(var h=new THREE.Vector3,M=0,p=this.objects.length;M<p;M++){var d=Math.acos(2*M/p-1),m=Math.sqrt(p*Math.PI)*d,g=new THREE.Object3D;g.position.x=800*Math.cos(m)*Math.sin(d),g.position.y=800*Math.sin(m)*Math.sin(d),g.position.z=800*Math.cos(d),h.copy(g.position).multiplyScalar(2),g.lookAt(h),this.targets.sphere.push(g);var w=new THREE.Object3D;w.position.x=9e3*Math.cos(m)*Math.sin(d),w.position.y=9e3*Math.sin(m)*Math.sin(d),w.position.z=9e3*Math.cos(d),h.copy(w.position).multiplyScalar(2),w.lookAt(h),this.targetsdh.sphere.push(w)}for(var y=0;y<this.objects.length;y++){var D=new THREE.Object3D;D.position.x=y%5*400-800,D.position.y=-Math.floor(y/5)%5*300+500,D.position.z=200*Math.floor(y/25)-800,this.targets.grid.push(D)}this.renderer=new THREE.CSS3DRenderer,this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.domElement.style.position="absolute",s.a.getId("state").appendChild(this.renderer.domElement),this.controls=new THREE.TrackballControls(this.camera),this.controls.rotateSpeed=.5,this.controls.minDistance=500,this.controls.maxDistance=6e3,this.controls.addEventListener("change",this.render),this.transform(this.targets.grid,3e3),window.addEventListener("resize",this.onWindowResize,!1)},transform:function(t,e){TWEEN.removeAll();for(var i=0;i<this.objects.length;i++){var s=this.objects[i],n=t[i];new TWEEN.Tween(s.position).to({x:n.position.x,y:n.position.y,z:n.position.z},Math.random()*e+e).start(),new TWEEN.Tween(s.rotation).to({x:n.rotation.x,y:n.rotation.y,z:n.rotation.z},Math.random()*e+e).start()}new TWEEN.Tween(this).to({},2*e).onUpdate(this.render).start()},onWindowResize:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.render()},render:function(){this.renderer.render(this.scene,this.camera)},animate:function(){this.scene.rotation.x+=.008,this.scene.rotation.y+=.008,requestAnimationFrame(this.animate),TWEEN.update(),this.controls.update(),this.render()},lotteryClick:function(){var t=this;if(this.setImgNum(),"请选择奖项开始抽奖"===this.prizeDesc)return alert("请选择奖项！"),!0;if("../static/img/prize_start.png"===this.prizeButSrc)this.popWindowshow=!0;else{clearInterval(this.cylic),0!==this.peopleNull.length&&alert(this.peopleNull[0]+this.peopleNull[2]),setTimeout(function(){for(var e=0;e<t.luckyer.length;e++)t.luckyNum[e].src="http://113.105.246.230:5110/"+t.luckyer[e].picdir},301);var e=s.a.getId("music");e.src="../static/music/lucky.wav",e.play(),this.prizeButSrc="../static/img/prize_start.png";for(var i=0;i<50;i++)s.a.getId("leafContainer").appendChild(r());setTimeout(function(){t.luckPeople(),t.lotteryTipShow=!0},1e3)}},comfirmLottery:function(){var t=this;this.popWindowshow=!1;var e=s.a.getId("music");"../static/img/prize_start.png"===this.prizeButSrc&&(this.setLuckyImgPath(),this.prizeButSrc="../static/img/prize_stop.png",this.transform(this.targets.sphere,1e3),e.src="../static/music/play.wav",e.play(),s.a.getId("audioBtn").classList.add("rotating"),setTimeout(function(){t.luck()},1500))},setImgNum:function(){var t=this;this.$post("/pyapi/console",{key:"show_level"}).then(function(e){if(403===e[1])alert(e[0]+e[1]);else for(var i=function(i){t.level===e[i].id&&(t.imgNum=e[i].num,t.$nextTick(function(){s.a.getId("box").style.marginLeft="-"+Math.floor((120*e[i].num+15*e[i].num)/2)+"px"}))},n=0;n<e.length;n++)i(n)}).catch(function(t){alert("err:"+t)})},setLuckyImgPath:function(){var t=this;this.cylic=setInterval(function(){t.luckyNum=[];for(var e=0;e<t.imgNum;e++){var i={};i.src="http://113.105.246.230:5110/"+t.listImg[t.setRandom()].picdir,t.luckyNum.push(i)}},150)},setRandom:function(){return Math.floor(Math.random()*this.listImg.length)},choseLottery:function(t,e){this.level=e,this.prizeDesc=t,this.drawerShow=!1},luck:function(){var t=this;this.$post("/pyapi/console",{key:"luck",content:this.level}).then(function(e){if(403===e[1])return t.peopleNull=e,!0;t.luckyer=e}).catch(function(t){console.log(t)})},luckPeople:function(){for(var t=this,e=function(e){var i=t;setTimeout(function(){var t=document.createElement("div");t.className="list",t.style.opacity=0,t.style.animation="move 2s ease-in-out",t.style.animationDelay=.5*e+"s";var n=document.createElement("img");n.className="list_img",n.src="http://113.105.246.230:5110/"+i.luckyer[e].picdir,t.appendChild(n);var a=document.createElement("p");a.className="list_name",a.innerHTML="姓名："+i.luckyer[e].name;var o=document.createElement("p");o.className="list_name",o.innerHTML="工号："+i.luckyer[e].jobnum;var r=document.createElement("p");r.className="list_name",r.innerHTML="奖品："+i.luckyer[e].pz,t.appendChild(a),t.appendChild(o),t.appendChild(r),i.luckyer.length>12&&(t.style.width="100px",t.style.height="100px",n.style.width="45px",n.style.height="45px",n.style.marginTop="15px"),t.addEventListener("animationend",function(){t.style.opacity=1},!1),s.a.getId("tip_list").appendChild(t)},500)},i=0;i<this.luckyer.length;i++)e(i)},back:function(){this.boxShow=!1,this.lotteryTipShow=!1,this.luckyer=[],this.luckyNum=[],s.a.getId("audioBtn").classList.remove("rotating"),s.a.getId("music").pause();for(var t=document.getElementsByClassName("list");t.length>0;)t[0].remove()}},components:{popWindow:i("tG27").a}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lottery-device-wrapper"},[i("div",{staticClass:"title"}),t._v(" "),i("div",{staticClass:"side-bar"},[i("div",{staticClass:"nav",on:{click:function(e){t.drawerShow=!0}}}),t._v(" "),i("div",{staticClass:"text"},[t._v("\n      "+t._s(t.prizeDesc)+"\n    ")])]),t._v(" "),t._m(0),t._v(" "),i("transition",{attrs:{name:"slide"}},[t.drawerShow?i("div",{staticClass:"drawer-wrapper"},[i("div",{staticClass:"close",on:{click:function(e){t.drawerShow=!1}}}),t._v(" "),i("div",{staticClass:"draw-container"},[i("ul",t._l(t.prizeLevel,function(e,s){return i("li",{key:s,on:{click:function(i){t.choseLottery(e.title,e.level)}}},[t._v(t._s(e.title))])}),0)])]):t._e()]),t._v(" "),i("div",{staticClass:"state",attrs:{id:"state"}}),t._v(" "),i("div",{staticClass:"lottery",on:{click:t.lotteryClick}},[i("img",{attrs:{src:t.prizeButSrc,id:"prize_img"}})]),t._v(" "),i("div",{staticClass:"box-wrapper"},[i("div",{staticClass:"box",attrs:{id:"box"}},t._l(t.luckyNum,function(t,e){return i("li",{key:e},[i("img",{attrs:{src:t.src}})])}),0)]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.lotteryTipShow,expression:"lotteryTipShow"}],staticClass:"tip_list",attrs:{id:"tip_list"}},[i("div",{staticClass:"tip_title",style:{"background-image":"url(../../../static/img/level_"+t.level+".png)"}}),t._v(" "),i("div",{attrs:{id:"leafContainer"}}),t._v(" "),i("div",{staticClass:"btn"},[i("button",{staticClass:"back",on:{click:t.back}},[t._v("返回抽奖")])])])]),t._v(" "),i("transition",{attrs:{name:"fade"}},[t.popWindowshow?i("pop-window",{attrs:{title:"抽奖确认","ok-text":"确定"},on:{cancel:function(e){t.popWindowshow=!1},ok:t.comfirmLottery}},[i("p",{staticStyle:{padding:"14px 16px","font-size":"14px",color:"#515a6e"},attrs:{slot:"content"},slot:"content"},[t._v("\n        是否确定抽取"+t._s(t.prizeDesc)+"？")])]):t._e()],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"audio-wrapper"},[e("div",{staticClass:"audio-btn",attrs:{id:"audioBtn"}},[e("img",{attrs:{src:i("0yXI")}})]),this._v(" "),e("audio",{attrs:{src:"../static/music/play.wav",id:"music"}})])}]};var u=i("VU/8")(c,l,!1,function(t){i("7cnZ")},null,null);e.default=u.exports}});
//# sourceMappingURL=3.1f223a4fc992e9a6b19a.js.map